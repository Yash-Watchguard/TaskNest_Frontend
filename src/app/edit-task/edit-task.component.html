<p-toast position="top-right"></p-toast>
<div class="modal-overlay">
  <div class="modal-content">
    <header class="modal-header">
      <div class="modal-title-container">
        <i class="plus-icon">+</i>
        <h2>Edit Task</h2>
      </div>
      <p class="modal-subtitle">Update the task details</p>
    </header>

    <div class="modal-scroll-area">
      <form class="form" #addtask="ngForm">
        <div class="form-group">
          <label for="task-titel" class="form-label">Titel</label>
          <input
            type="text"
            class="form-input"
            id="task-titel"
            [placeholder]="titel"
            required
            [(ngModel)]="titel"
            name="titel"
          />
         
        </div>

        <div class="form-group">
          <label for="description" class="form-label">Task Description</label>
          <textarea
            class="form-input"
            id="description"
            rows="3"
            maxlength="500"
            required
            [(ngModel)]="description"
            name="project_description"
            [placeholder]="description"
            name="des"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="acceptance" class="form-label">Acceptance Criteria</label>
          <textarea
            class="form-input"
            id="acceptance"
           [placeholder]="acceptanceCriteria"
            rows="3"
            maxlength="500"
            required
            [(ngModel)]="acceptanceCriteria"
            name="acceptance_criteria"
           
          ></textarea>
        </div>

        <div class="form-group">
          <label for="priority" class="form-label">Select priority</label>
          <select
            class="form-input"
            [(ngModel)]="task_priority"
            required
            name="priority"
          >
            <option value="" disabled selected>Select priority</option>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
          </select>
        </div>

        <div class="form-group">
          <label for="deadline" class="form-label">Task Deadline</label>
          <input
            type="date"
            class="form-input"
            id="deadline"
            min="2025-10-14"
            required
            (keydown)="onKeyDown($event)"
            (paste)="$event.preventDefault()"
            [(ngModel)]="deadline"
            name="deadline"
            [placeholder]="task.Deadline |date:'dd/MM/yyyy'"
          />
        </div>

        <div class="form-group">
          <label for="manager-id" class="form-label">Assign Employee</label>
          <select
            class="form-input"
            id="manager-id"
            required
            [(ngModel)]="empId"
            name="emp"
          >
            <option value="">Select an employee</option>
            @for(manager of empList;track manager.Id){
            <option [value]="manager.Id">{{ manager.Name }}</option>
            }
          </select>
         
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="close()">
          Cancel
        </button>
        <button
          type="submit"
          class="submit-btn"
          [disabled]="!isedit()"
          (click)="editTask()"

        >
          Save Changes
        </button>
      </div>
    </div>
  </div>
</div>
